/*! skrollr 0.5.14 (2013-04-05) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr | Free to use under terms of MIT license */
(function(e,t,r){"use strict";function n(r){if(o=t.documentElement,a=t.body,O(),j=this,r=r||{},K=r.constants||{},r.easing)for(var n in r.easing)V[n]=r.easing[n];if(Y={beforerender:r.beforerender,render:r.render},J=r.forceHeight!==!1,X=r.smoothScrolling!==!1,Z={targetTop:j.getScrollTop()},J&&(ct=r.scale||1),ot(o,[u],[p]),J){var i=t.getElementById("skrollr-body")||t.createElement("div"),s=i.style;s.minWidth="1px",s.position="absolute",s.top=s.zIndex="0",i.id||(s.width="1px",s.right="0",a.appendChild(i)),function(e){tt=function(){e.apply(this,arguments),s.height=ft+o.clientHeight+"px"}}(tt)}return j.refresh(),l.addEvent(e,"resize",tt),function f(){S(f),N()}(),j}var o,a,l=e.skrollr={get:function(){return j},init:function(e){return j||new n(e)},VERSION:"0.5.14"},i=Object.prototype.hasOwnProperty,s="rendered",f="un"+s,c="skrollable",u="skrollr",p="no-"+u,m="linear",d=1e3,g=200,h="start",v="end",T="center",y="bottom",b="___has_rendered_class",k="___skrollable_id",S=e.requestAnimationFrame;(function(){for(var t=["ms","moz","webkit","o"],r=0,n=t.length;n>r&&!S;r++)S=e[t[r]+"RequestAnimationFrame"];var o=0;S||(S=function(t){var r=it(),n=Math.max(0,30-(r-o));e.setTimeout(function(){t(r+n)},n),o=r+n})})();var w,x,E=/^\s+|\s+$/g,F=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,z=/\s*([a-z\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,A=/^([a-z\-]+)\[(\w+)\]$/,M=/-([a-z])/g,_=function(e,t){return t.toUpperCase()},D=/[\-+]?[\d]*\.?[\d]+/g,H=/\{\?\}/g,C=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,I=/[a-z\-]+-gradient/g,O=function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(e.getComputedStyle){var r=e.getComputedStyle(a,null);for(var n in r)if(w=n.match(t)||+n==n&&r[n].match(t))break;w&&(w=w[0],"-"===w.slice(0,1)?(x=w,w={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[w]):x="-"+w.toLowerCase()+"-")}},V={begin:function(){return 0},end:function(){return 1},linear:function(e){return e},quadratic:function(e){return e*e},cubic:function(e){return e*e*e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5},sqrt:function(e){return Math.sqrt(e)},bounce:function(e){var t;if(.5083>=e)t=3;else if(.8489>=e)t=9;else if(.96208>=e)t=27;else{if(!(.99981>=e))return 1;t=91}return 1-Math.abs(3*Math.cos(1.028*e*t)/t)}};n.prototype.refresh=function(e){var n,o,a=!1;for(e===r?(a=!0,W=[],dt=0,e=t.getElementsByTagName("*")):e=[].concat(e),n=0,o=e.length;o>n;n++){var l=e[n],i=l,u=[],p=X;if(l.attributes){for(var m=0,d=l.attributes.length;d>m;m++){var g=l.attributes[m];if("data-anchor-target"!==g.name)if("data-smooth-scrolling"!==g.name){var T=g.name.match(F);if(null!==T){var y=T[1];y=y&&K[y.substr(1)]||0;var S=(0|T[2])+y,w=T[3],x=T[4]||w,E={offset:S,props:g.value,element:l};u.push(E),w&&w!==h&&w!==v?(E.mode="relative",E.anchors=[w,x]):(E.mode="absolute",w===v?E.isEnd=!0:(E.frame=S*ct,delete E.offset))}}else p="off"!==g.value;else if(i=t.querySelector(g.value),null===i)throw'Unable to find anchor target "'+g.value+'"'}if(u.length){var z,A,M;!a&&k in l?(M=l[k],z=W[M].styleAttr,A=W[M].classAttr):(M=l[k]=dt++,z=l.style.cssText,A=nt(l));var _=W[M]={element:l,styleAttr:z,classAttr:A,anchorTarget:i,keyFrames:u,smoothScrolling:p};ot(l,[c,s],[f]),_[b]=!0}}}for(tt(),n=0,o=e.length;o>n;n++){var D=W[e[n][k]];D!==r&&(D.keyFrames.sort(st),$(D),L(D))}return j},n.prototype.relativeToAbsolute=function(e,t,r){var n=o.clientHeight,a=e.getBoundingClientRect(),l=a.top,i=a.bottom-a.top;return t===y?l-=n:t===T&&(l-=n/2),r===y?l+=i:r===T&&(l+=i/2),l+=j.getScrollTop(),0|l+.5},n.prototype.animateTo=function(e,t){t=t||{};var n=it(),o=j.getScrollTop();return Q={startTop:o,topDiff:e-o,targetTop:e,duration:t.duration||d,startTime:n,endTime:n+(t.duration||d),easing:V[t.easing||m],done:t.done},Q.topDiff||(Q.done&&Q.done.call(j,!1),Q=r),j},n.prototype.stopAnimateTo=function(){Q&&Q.done&&Q.done.call(j,!0),Q=r},n.prototype.isAnimatingTo=function(){return!!Q},n.prototype.setScrollTop=function(t,r){return r===!0&&(pt=t,et=!0),l.iscroll?l.iscroll.scrollTo(0,-t):e.scrollTo(0,t),j},n.prototype.getScrollTop=function(){return l.iscroll?-l.iscroll.y:e.pageYOffset||o.scrollTop||a.scrollTop||0},n.prototype.on=function(e,t){return Y[e]=t,j},n.prototype.off=function(e){return delete Y[e],j};var q=function(){var e,t,r,n,o,a,l,i,s,f,c;for(i=0,s=W.length;s>i;i++)for(e=W[i],t=e.element,r=e.anchorTarget,n=e.keyFrames,o=0,a=n.length;a>o;o++)l=n[o],"relative"===l.mode&&(f=t.style.cssText,c=nt(t),t.style.cssText=e.styleAttr,ot(t,e.classAttr),l.frame=j.relativeToAbsolute(r,l.anchors[0],l.anchors[1])-l.offset,t.style.cssText=f,ot(t,c)),J&&!l.isEnd&&l.frame>ft&&(ft=l.frame);for(ft=Math.max(ft,rt()),i=0,s=W.length;s>i;i++)for(e=W[i],n=e.keyFrames,o=0,a=n.length;a>o;o++)l=n[o],l.isEnd&&(l.frame=ft-l.offset)},G=function(e,t){for(var r=0,n=W.length;n>r;r++){var o,a,c=W[r],u=c.smoothScrolling?e:t,p=c.keyFrames,m=p[0].frame,d=p[p.length-1].frame,g=m>=u,h=u>=d;if(g||h){var v=p[g?0:p.length-1].props;for(o in v)i.call(v,o)&&(a=P(v[o].value),l.setStyle(c.element,o,a));c[b]&&(m>u||u>d)&&(ot(c.element,[f],[s]),c[b]=!1)}else{c[b]||(ot(c.element,[s],[f]),c[b]=!0);for(var T=0,y=p.length-1;y>T;T++)if(u>=p[T].frame&&p[T+1].frame>=u){var k=p[T],S=p[T+1];for(o in k.props)if(i.call(k.props,o)){var w=(u-k.frame)/(S.frame-k.frame);w=k.props[o].easing(w),a=U(k.props[o].value,S.props[o].value,w),a=P(a),l.setStyle(c.element,o,a)}break}}}},N=function(){var e,t,n=j.getScrollTop(),o=it();if(Q)o>=Q.endTime?(n=Q.targetTop,e=Q.done,Q=r):(t=Q.easing((o-Q.startTime)/Q.duration),n=0|Q.startTop+t*Q.topDiff),j.setScrollTop(n);else{var a=Z.targetTop-n;a&&(Z={startTop:pt,topDiff:n-pt,targetTop:n,startTime:mt,endTime:mt+g}),Z.endTime>=o&&(t=V.sqrt((o-Z.startTime)/g),n=0|Z.startTop+t*Z.topDiff)}if(0>n&&(n=0),et||pt!==n){ut=n>=pt?"down":"up",et=!1;var l={curTop:n,lastTop:pt,maxTop:ft,direction:ut},i=Y.beforerender&&Y.beforerender.call(j,l);i!==!1&&(G(n,j.getScrollTop()),pt=n,Y.render&&Y.render.call(j,l)),e&&e.call(j,!1)}mt=o},$=function(e){for(var t=0,r=e.keyFrames.length;r>t;t++){for(var n,o,a,l,i=e.keyFrames[t],s={};null!==(l=z.exec(i.props));)a=l[1],o=l[2],n=a.match(A),null!==n?(a=n[1],n=n[2]):n=m,o=o.indexOf("!")?B(o):[o.slice(1)],s[a]={value:o,easing:V[n]};i.props=s}},B=function(e){var t=[];return C.lastIndex=0,e=e.replace(C,function(e){return e.replace(D,function(e){return 100*(e/255)+"%"})}),x&&(I.lastIndex=0,e=e.replace(I,function(e){return x+e})),e=e.replace(D,function(e){return t.push(+e),"{?}"}),t.unshift(e),t},L=function(e){var t,r,n={};for(t=0,r=e.keyFrames.length;r>t;t++)R(e.keyFrames[t],n);for(n={},t=e.keyFrames.length-1;t>=0;t--)R(e.keyFrames[t],n)},R=function(e,t){var r;for(r in t)i.call(e.props,r)||(e.props[r]=t[r]);for(r in e.props)t[r]=e.props[r]},U=function(e,t,r){var n,o=e.length;if(o!==t.length)throw"Can't interpolate between \""+e[0]+'" and "'+t[0]+'"';var a=[e[0]];for(n=1;o>n;n++)a[n]=e[n]+(t[n]-e[n])*r;return a},P=function(e){var t=1;return H.lastIndex=0,e[0].replace(H,function(){return e[t++]})};l.setStyle=function(e,t,r){var n=e.style;if(t=t.replace(M,_).replace("-",""),"zIndex"===t)n[t]=""+(0|r);else if("float"===t)n.styleFloat=n.cssFloat=r;else try{w&&(n[w+t.slice(0,1).toUpperCase()+t.slice(1)]=r),n[t]=r}catch(o){}},l.addEvent=function(t,r,n){var o=function(t){return t=t||e.event,t.target||(t.target=t.srcElement),t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),n.call(this,t)};e.addEventListener?t.addEventListener(r,o,!1):t.attachEvent("on"+r,o)};var j,W,Y,J,K,Q,X,Z,et,tt=function(){ft=0,q(),et=!0,l.iscroll&&e.setTimeout(function(){l.iscroll.refresh()},0)},rt=function(){var e=Math.max(a.scrollHeight,a.offsetHeight,o.scrollHeight,o.offsetHeight,o.clientHeight);return e-o.clientHeight},nt=function(t){var r="className";return e.SVGElement&&t instanceof e.SVGElement&&(t=t[r],r="baseVal"),t[r]},ot=function(t,n,o){var a="className";if(e.SVGElement&&t instanceof e.SVGElement&&(t=t[a],a="baseVal"),o===r)return t[a]=n,r;for(var l=t[a],i=0,s=n.length;s>i;i++)-1===lt(l).indexOf(lt(n[i]))&&(l+=" "+n[i]);for(var f=0,c=o.length;c>f;f++)l=lt(l).replace(lt(o[f])," ");t[a]=at(l)},at=function(e){return e.replace(E,"")},lt=function(e){return" "+e+" "},it=Date.now||function(){return+new Date},st=function(e,t){return e.frame-t.frame},ft=0,ct=1,ut="down",pt=-1,mt=it(),dt=0})(window,document);